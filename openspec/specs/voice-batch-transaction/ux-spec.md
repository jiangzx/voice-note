# BatchConfirmationCard UX Spec

## Design Principles

1. **å•ç¬”é›¶é€€åŒ–**: `batch.size == 1` æ—¶å±•ç¤ºç°æœ‰ `ConfirmationCard`ï¼Œç”¨æˆ·ä½“éªŒå®Œå…¨ä¸å˜
2. **è¯­éŸ³è¾“å…¥ + è§†è§‰å®¡æ ¸**: è¯­éŸ³æ˜¯è¾“å…¥/çº æ­£é€šé“ï¼ŒUI æ˜¯å®¡æ ¸/æµè§ˆé€šé“
3. **æ¸è¿›å¼å¤æ‚åº¦**: 2-3 ç¬”æ—¶åˆ—è¡¨ç´§å‡‘ï¼›4+ ç¬”æ—¶å¯æ»šåŠ¨ï¼›æ“ä½œå§‹ç»ˆç®€å•
4. **çŠ¶æ€å¯è§**: æ¯ç¬”çš„ pending/confirmed/cancelled çŠ¶æ€é€šè¿‡é¢œè‰²ã€å›¾æ ‡ã€åŠ¨ç”»å³æ—¶å¯è§

## Layout Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [AI è¯†åˆ« â—â—â—‹]                    [2ç¬”å¾…ç¡®è®¤]  â”‚  â† Header: source badge + pending count
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 1  ğŸ”´æ”¯å‡º  Â¥60.00   é¤é¥®   åƒé¥­        â”‚ â”‚  â† Item row (swipeable)
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 2  ğŸ”´æ”¯å‡º  Â¥60.00   æ´—æµ´   æ´—è„š        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 3  ğŸŸ¢æ”¶å…¥  Â¥30.00   çº¢åŒ…   çº¢åŒ…        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 4  ğŸŸ¢æ”¶å…¥  Â¥90.00   å·¥èµ„   å·¥èµ„        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å…±4ç¬” Â· æ”¯å‡ºÂ¥120 Â· æ”¶å…¥Â¥120                  â”‚  â† Summary bar
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ å…¨éƒ¨å–æ¶ˆ ]          [ âœ“ å…¨éƒ¨ç¡®è®¤ ]         â”‚  â† Action bar
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Card Container

- **èƒŒæ™¯**: `theme.colorScheme.surfaceContainerLow`
- **åœ†è§’**: `AppRadius.xlAll` (16px)
- **å†…è¾¹è·**: `AppSpacing.lg` (16px)
- **æœ€å¤§é«˜åº¦**: å±å¹•é«˜åº¦ 60%ï¼ˆè¶…å‡ºæ—¶å†…éƒ¨åˆ—è¡¨å¯æ»šåŠ¨ï¼‰
- **å…¥åœºåŠ¨ç”»**: slide-up 40px + fade-inï¼Œ`AppDuration.normal` (300ms)ï¼Œ`Curves.easeOutCubic`

## Header

- **Confidence**: å– batch ä¸­æ‰€æœ‰ç¬”çš„æœ€ä½ confidenceï¼ˆä¿å®ˆå±•ç¤ºï¼‰
- **Pending count badge**: å®æ—¶æ›´æ–°ï¼Œé¢œè‰² `primaryContainer`
- å½“æ‰€æœ‰ç¬”å·²å¤„ç†ï¼ˆconfirmed/cancelledï¼‰ï¼Œbadge å˜ä¸º `âœ“ å·²å®Œæˆ`

## Item Row

### å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [åºå·]  [ç±»å‹Chip]  [é‡‘é¢]       [åˆ†ç±»] [æè¿°] â”‚
â”‚   48dp     auto       flex-end     auto   auto  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **è¡Œé«˜**: 56dpï¼ˆæ»¡è¶³ 48dp æœ€å°è§¦æ§ç›®æ ‡ + ä¸Šä¸‹ 4dp paddingï¼‰
- **åºå·**: 1-basedï¼Œ`bodySmall`ï¼Œ`outline` é¢œè‰²ï¼Œå®½ 24dp å±…ä¸­
- **ç±»å‹ Chip**: å¤ç”¨ç°æœ‰ç±»å‹åˆ‡æ¢ badgeï¼ˆæ”¯å‡º/æ”¶å…¥/è½¬è´¦ï¼‰ï¼Œç‚¹å‡»å¯åˆ‡æ¢
- **é‡‘é¢**: `titleMedium`ï¼Œ`fontWeight: w600`ï¼Œä½¿ç”¨ `TransactionColors` æ ¹æ®ç±»å‹ç€è‰²
- **åˆ†ç±»**: `bodyMedium`ï¼Œ`onSurface` é¢œè‰²
- **æè¿°**: `bodySmall`ï¼Œ`outline` é¢œè‰²ï¼ˆä»… description != category æ—¶æ˜¾ç¤ºï¼‰

### çŠ¶æ€å¯è§†åŒ–

| çŠ¶æ€ | èƒŒæ™¯è‰² | å·¦ä¾§æŒ‡ç¤ºå™¨ | æ–‡å­— | å¯äº¤äº’ |
|---|---|---|---|---|
| **pending** | é€æ˜ | æ—  | æ­£å¸¸ | æ˜¯ |
| **confirmed** | `primaryContainer` @ 0.3 alpha | âœ“ ç»¿è‰²åœ†ç‚¹ | æ­£å¸¸ | å¦ï¼ˆç½®ç°ï¼‰ |
| **cancelled** | `errorContainer` @ 0.15 alpha | âœ— ç°è‰²åœ†ç‚¹ | åˆ é™¤çº¿ + 0.5 alpha | å¦ï¼ˆç½®ç°ï¼‰ |

### çŠ¶æ€å˜åŒ–åŠ¨ç”»

- **pending â†’ confirmed**: èƒŒæ™¯è‰²æ¸å˜ï¼ˆ0 â†’ primaryContainerï¼‰ï¼Œå·¦ä¾§ âœ“ å›¾æ ‡ scale-in 150ms
- **pending â†’ cancelled**: èƒŒæ™¯è‰²æ¸å˜ï¼ˆ0 â†’ errorContainerï¼‰ï¼Œé«˜åº¦æ”¶ç¼©è‡³ 40dpï¼ˆ250msï¼‰ï¼Œæ–‡å­—åŠ åˆ é™¤çº¿
- **çº æ­£æ›´æ–°**: å˜åŒ–å­—æ®µé«˜äº®é—ªçƒï¼ˆé»„è‰²èƒŒæ™¯ 200ms â†’ æ¶ˆé€€ 300msï¼‰ï¼Œ`HapticFeedback.selectionClick()`

### ç‚¹å‡»äº¤äº’

- **ç‚¹å‡»æ•´è¡Œ**: å±•å¼€ä¸ºå•ç¬”è¯¦æƒ…è§†å›¾ï¼ˆå¤ç”¨ç°æœ‰ ConfirmationCard å­—æ®µè¡Œå¸ƒå±€ï¼‰ï¼Œå¯ç¼–è¾‘å„å­—æ®µ
- **ç‚¹å‡»ç±»å‹ Chip**: ç›´æ¥åˆ‡æ¢ EXPENSE â†’ INCOME â†’ TRANSFER
- **è§¦æ§åé¦ˆ**: `HapticFeedback.selectionClick()` on tap

## Swipe Gestures

### å·¦æ»‘å–æ¶ˆï¼ˆå•ç¬”ï¼‰

- **è§¦å‘é˜ˆå€¼**: æ°´å¹³æ»‘åŠ¨ > è¡Œå®½ 25%
- **èƒŒæ™¯**: `theme.colorScheme.errorContainer`ï¼Œæ˜¾ç¤ºã€Œå–æ¶ˆã€æ–‡å­— + åƒåœ¾æ¡¶å›¾æ ‡
- **åŠ¨ç”»**: æ¾æ‰‹åè¡Œå†…å®¹å¼¹å› + çŠ¶æ€å˜ä¸º cancelledï¼ˆ250ms, `Curves.fastOutSlowIn`ï¼‰
- **åé¦ˆ**: `HapticFeedback.mediumImpact()` è¾¾åˆ°é˜ˆå€¼æ—¶

### å³æ»‘ç¡®è®¤ï¼ˆå•ç¬”ï¼‰

- **è§¦å‘é˜ˆå€¼**: æ°´å¹³æ»‘åŠ¨ > è¡Œå®½ 25%
- **èƒŒæ™¯**: `theme.colorScheme.primaryContainer`ï¼Œæ˜¾ç¤ºã€Œç¡®è®¤ã€æ–‡å­— + âœ“ å›¾æ ‡
- **åŠ¨ç”»**: åŒä¸Š
- **åé¦ˆ**: `HapticFeedback.lightImpact()` è¾¾åˆ°é˜ˆå€¼æ—¶

### Swipe çº¦æŸ

- å·²ç¡®è®¤/å·²å–æ¶ˆçš„è¡Œ SHALL NOT å“åº”æ»‘åŠ¨æ‰‹åŠ¿
- æ»‘åŠ¨è¿›è¡Œä¸­ SHALL ç¦ç”¨åˆ—è¡¨æ»šåŠ¨ï¼ˆé¿å…æ‰‹åŠ¿å†²çªï¼‰
- å•ç¬”æ¨¡å¼ (size == 1) ä¸æ˜¾ç¤º swipe æç¤ºï¼ˆä¿æŒç°æœ‰ UIï¼‰

## Summary Bar

- ä»…åœ¨ `batch.size > 1` æ—¶æ˜¾ç¤º
- é‡‘é¢å®æ—¶åæ˜ çº æ­£åçš„å€¼
- å·²å–æ¶ˆçš„ç¬”ä¸è®¡å…¥åˆè®¡

## Action Bar

### å¤šç¬”æ¨¡å¼ (size > 1)

- **ã€Œå…¨éƒ¨ç¡®è®¤ã€æŒ‰é’®**: å§‹ç»ˆæ˜¾ç¤º pending count
- **ã€Œå…¨éƒ¨å–æ¶ˆã€æŒ‰é’®**: æ—  pending items æ—¶ disabled
- å½“ `pendingCount == 0`ï¼ˆæ‰€æœ‰ item å·²é€æ¡å¤„ç†ï¼‰ï¼Œaction bar å˜ä¸ºã€Œå®Œæˆã€å•æŒ‰é’®

### å•ç¬”æ¨¡å¼ (size == 1)

ä¿æŒç°æœ‰ `_ActionRow` ä¸å˜ï¼š`[ å–æ¶ˆ ]  [ âœ“ ç¡®è®¤è®°è´¦ ]`

## Scrolling Behavior

- **â‰¤ 3 ç¬”**: åˆ—è¡¨ä¸å¯æ»šåŠ¨ï¼Œå¡ç‰‡é«˜åº¦è‡ªé€‚åº”
- **4+ ç¬”**: åˆ—è¡¨åŒºåŸŸå›ºå®šé«˜åº¦ï¼ˆ3.5 è¡Œé«˜åº¦ = 196dpï¼‰ï¼Œå¯çºµå‘æ»šåŠ¨
- æ»šåŠ¨æ—¶ header å’Œ action bar å›ºå®šä¸åŠ¨
- åˆ—è¡¨ä½¿ç”¨ `ClipRRect` è£å‰ªåœ†è§’
- æ»šåŠ¨æŒ‡ç¤ºå™¨ï¼šMaterial 3 scroll indicatorï¼ˆè¾¹ç¼˜ fadeï¼‰

## Transitions & Animations

### 1. æ–°ç¬”è¿½åŠ ï¼ˆappendï¼‰
- æ–°è¡Œä»åº•éƒ¨ slide-in (250ms, easeOutCubic): translateY 56â†’0, opacity 0â†’1
- åŒæ—¶ summary bar æ•°å­— AnimatedSwitcher æ›´æ–°

### 2. ç¬”å–æ¶ˆï¼ˆcancelItemï¼‰
- è¡Œé«˜ä» 56dp æ”¶ç¼©è‡³ 40dp (250ms, fastOutSlowIn)
- æ–‡å­—åŠ  `TextDecoration.lineThrough`ï¼Œopacity 1â†’0.5
- èƒŒæ™¯è‰²æ¸å˜è‡³ errorContainer @ 0.15

### 3. çº æ­£æ›´æ–°ï¼ˆupdateItemï¼‰
- å˜åŒ–å­—æ®µæ–‡å­—ï¼šèƒŒæ™¯ highlight é—ªçƒ (yellow @ 0.3, 200ms ease-in) â†’ æ•°å€¼ AnimatedSwitcher (150ms) â†’ highlight æ¶ˆé€€ (300ms ease-out)
- Haptic: selectionClick

### 4. å…¨éƒ¨ç¡®è®¤ï¼ˆconfirmAllï¼‰
- æ‰€æœ‰ pending è¡Œä¾æ¬¡ stagger 50msï¼šèƒŒæ™¯è‰²æ¸å˜è‡³ primaryContainerï¼Œâœ“ å›¾æ ‡ scale-in
- æ•´ä½“å¡ç‰‡ delay 300ms å slide-down 40px + fade-out (300ms) â†’ è§¦å‘ä¿å­˜

### 5. å±•å¼€è¯¦æƒ…ï¼ˆç‚¹å‡»è¡Œï¼‰
- è¡Œ expand è‡³å®Œæ•´å¡ç‰‡è§†å›¾ (350ms, easeInOutCubic)
- å…¶ä»–è¡Œ opacity 1â†’0ï¼Œå½“å‰è¡Œå­—æ®µé€ä¸ª fade-in (stagger 50ms)
- é¡¶éƒ¨å‡ºç° â† è¿”å›åˆ—è¡¨æŒ‰é’®

## Voice + Touch Hybrid

### è¯­éŸ³çº æ­£è¿›è¡Œä¸­
- LLM è¯·æ±‚å‘èµ·æ—¶ï¼šè¢«ä¿®æ”¹çš„è¡Œæ˜¾ç¤º shimmer loading æ•ˆæœ
- LLM è¿”å›åï¼šshimmer åœæ­¢ï¼Œå­—æ®µæ›´æ–°åŠ¨ç”»è§¦å‘

### æ··åˆæ“ä½œå†²çªå¤„ç†
- ç”¨æˆ·æ­£åœ¨æ»‘åŠ¨æŸè¡Œæ—¶ï¼Œè¯­éŸ³çº æ­£åˆ°è¾¾ â†’ å»¶è¿Ÿåº”ç”¨çº æ­£ç›´åˆ°æ»‘åŠ¨å®Œæˆ
- ç”¨æˆ·æ­£åœ¨ç¼–è¾‘å­—æ®µå¼¹çª—æ—¶ï¼Œè¯­éŸ³çº æ­£åˆ°è¾¾ â†’ å¿½ç•¥è¯¥çº æ­£ï¼ŒTTS æç¤ºã€Œæ­£åœ¨ç¼–è¾‘ä¸­ï¼Œè¯·ç¼–è¾‘å®Œæˆåå†è¯´ã€
- ç”¨æˆ·ç‚¹å‡»å±•å¼€æŸè¡Œè¯¦æƒ…æ—¶ï¼Œè¯­éŸ³ confirmAll åˆ°è¾¾ â†’ å…ˆå…³é—­è¯¦æƒ… â†’ æ‰§è¡Œ confirmAll

## Accessibility

- **Semantics**: æ¯è¡Œæä¾›å®Œæ•´è¯­ä¹‰æ ‡ç­¾ã€Œç¬¬{N}ç¬”ï¼Œ{type}{amount}å…ƒï¼Œ{category}ï¼Œ{status}ã€
- **Swipe hint**: VoiceOver/TalkBack ç”¨æˆ·é€šè¿‡è‡ªå®šä¹‰æ“ä½œã€Œç¡®è®¤æ­¤ç¬”ã€ã€Œå–æ¶ˆæ­¤ç¬”ã€æ›¿ä»£æ»‘åŠ¨
- **Focus order**: Header â†’ åˆ—è¡¨è¡Œï¼ˆæŒ‰åºå·ï¼‰â†’ Summary â†’ Action buttons
- **Live region**: pending count å˜åŒ–æ—¶è§¦å‘ accessibility announcement

## Responsive Sizing

- **å°å± (<360dp width)**: åˆ†ç±»å’Œæè¿°æŠ˜å ä¸ºä¸€è¡Œï¼Œé‡‘é¢æ–‡å­—ç¼©å°è‡³ `bodyLarge`
- **å¤§å± (>600dp width)**: å¡ç‰‡æœ€å¤§å®½åº¦ 480dp å±…ä¸­ï¼Œåˆ—è¡¨è¡Œé—´å¢åŠ  horizontal padding
- **æ¨ªå±**: å¡ç‰‡ä½¿ç”¨å±å¹•å®½åº¦ 50%ï¼Œå±…ä¸­æ˜¾ç¤º

## Error States

- **ä¿å­˜å¤±è´¥**: å¡ç‰‡åº•éƒ¨å‡ºç°çº¢è‰²é”™è¯¯æ¡ã€Œä¿å­˜å¤±è´¥ï¼š{åŸå› }ã€ï¼Œaction bar å˜ä¸ºã€Œé‡è¯•ä¿å­˜ã€
- **ç½‘ç»œé”™è¯¯**: çº æ­£è¯·æ±‚å¤±è´¥æ—¶ï¼Œå¯¹åº”è¡Œæ¢å¤ shimmer å‰çŠ¶æ€ï¼ŒTTS æç¤ºé‡è¯•
