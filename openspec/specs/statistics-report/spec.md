## Purpose

定义统计报表功能的系统行为，包括时间维度选择、收支总览、分类饼图、收支柱状图、趋势折线图、同期对比、分类排行榜和按账户筛选。

## Requirements

### Requirement: 统计时间维度选择
系统 SHALL 提供四种时间维度：日、周、月、年。默认 SHALL 展示当前月。用户 SHALL 能在维度之间切换，并在选定维度内前后翻页。

#### Scenario: 默认展示当前月
- **WHEN** 用户进入统计页
- **THEN** 系统 SHALL 默认展示当前自然月的统计数据，时间维度 SHALL 为"月"

#### Scenario: 切换至周维度
- **WHEN** 用户切换时间维度为"周"
- **THEN** 系统 SHALL 展示当前自然周（周一至周日）的统计数据

#### Scenario: 前后翻页
- **WHEN** 用户在月维度下点击"上个月"
- **THEN** 系统 SHALL 展示上个月的统计数据

#### Scenario: 年维度
- **WHEN** 用户切换时间维度为"年"
- **THEN** 系统 SHALL 展示当前年的统计数据，包含 12 个月的趋势

### Requirement: 收支总览
系统 SHALL 在统计页顶部展示选定时间段的收入总额、支出总额和结余（收入 - 支出）。转账类型 SHALL NOT 计入收支总览。

#### Scenario: 月度收支总览
- **WHEN** 用户查看 2026 年 2 月的统计
- **THEN** 系统 SHALL 展示该月的总收入、总支出和结余

#### Scenario: 无数据时展示零值
- **WHEN** 选定时间段无任何交易
- **THEN** 系统 SHALL 展示总收入=0、总支出=0、结余=0

### Requirement: 分类饼图
系统 SHALL 提供饼图展示选定时间段内各分类的占比。默认展示支出分类占比。用户 SHALL 能切换为收入分类占比。饼图 SHALL 按金额降序排列，最多展示 Top 10 分类，其余合并为"其他"。

#### Scenario: 支出分类占比
- **WHEN** 用户查看月度统计且有 3 笔支出（餐饮 100、交通 50、购物 50）
- **THEN** 饼图 SHALL 展示餐饮 50%、交通 25%、购物 25%

#### Scenario: 切换至收入视角
- **WHEN** 用户切换饼图为收入视角
- **THEN** 饼图 SHALL 展示收入分类的占比

#### Scenario: 超过 10 个分类
- **WHEN** 用户有 12 个支出分类
- **THEN** 饼图 SHALL 展示 Top 10 分类，剩余 2 个合并为"其他"

#### Scenario: 无支出数据
- **WHEN** 选定时间段无支出交易
- **THEN** 系统 SHALL 展示空状态提示

### Requirement: 收支柱状图
系统 SHALL 提供柱状图对比选定时间段内收入和支出的分布。周维度 SHALL 展示该周每天的对比，月维度 SHALL 展示每日对比，年维度 SHALL 展示每月对比。无数据的时间段 SHALL 展示空状态提示文字。

> **实际行为说明**：日维度当前展示单日总收支柱形（未按上午/下午/晚上细分）。空数据状态当前展示"暂无数据"文字提示而非零高度柱形。

#### Scenario: 月度每日柱状图
- **WHEN** 用户查看 2026 年 2 月月度统计
- **THEN** 柱状图 SHALL 展示 1-28 日每天的收入和支出柱形

#### Scenario: 年度每月柱状图
- **WHEN** 用户查看 2026 年年度统计
- **THEN** 柱状图 SHALL 展示 1-12 月每月的收入和支出柱形

#### Scenario: 柱状图无数据
- **WHEN** 选定时间段内无任何交易
- **THEN** 柱状图 SHALL 展示空状态提示（当前实现为「暂无数据」文字）

### Requirement: 趋势折线图
系统 SHALL 提供折线图展示选定时间段的收支趋势。SHALL 包含两条线：支出趋势和收入趋势。折线图数据点 SHALL 与柱状图维度一致。无数据的时间段 SHALL 展示空状态提示文字。

> **实际行为说明**：无数据时当前展示"暂无数据"文字提示而非零值水平线。

#### Scenario: 月度趋势
- **WHEN** 用户查看 2026 年 2 月趋势
- **THEN** 折线图 SHALL 展示该月每日的收入和支出两条趋势线

#### Scenario: 折线图无数据
- **WHEN** 选定时间段内无任何交易
- **THEN** 折线图 SHALL 展示空状态提示（当前实现为「暂无数据」文字）

### Requirement: 分类排行榜
系统 SHALL 在统计页展示选定时间段的分类排行榜（默认支出）。每项 SHALL 展示分类名称、金额、占比百分比。SHALL 按金额降序排列。

#### Scenario: 支出排行
- **WHEN** 用户查看月度统计且有餐饮 200、交通 100、购物 50
- **THEN** 排行榜 SHALL 依次展示餐饮（¥200, 57%）、交通（¥100, 29%）、购物（¥50, 14%）

#### Scenario: 点击分类跳转
- **WHEN** 用户点击排行榜中的"餐饮"分类
- **THEN** 系统 SHALL 导航至交易列表，筛选条件 SHALL 为该分类 + 当前时间段

### Requirement: 统计页按账户筛选
统计页 SHALL 提供按账户筛选能力。默认展示所有账户合计。用户 MAY 选择特定账户查看该账户的独立统计。

#### Scenario: 按账户筛选
- **WHEN** 用户选择"支付宝"账户筛选
- **THEN** 所有统计数据 SHALL 仅包含该账户的交易
